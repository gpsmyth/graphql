import { ApolloServer, gql } from 'apollo-server';
import fs from 'fs';
import path from 'path';

const defaultTypeDefs = gql`
  type Query {
    hello: String
  }
`;

const defaultResolvers = {
  Query: {
    hello: () => 'Hello world!',
  },
};

const resolvers = fs.existsSync(path.join(process.cwd(), `/src/resolvers.js`))
  ? Object.assign({}, defaultResolvers, require('./resolvers'))
  : defaultResolvers;

const typeDefs = defaultTypeDefs;

const server = new ApolloServer({ typeDefs, resolvers });

server
  .listen({ port: 4000 })
  .then(({ url }) => console.log(`ğŸš€ Server ready at ${url}`));
